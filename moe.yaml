proxy-providers:
  # 订阅链接一
  provider1:
    url: "" # 在""内填入链接
    type: http
    interval: 86400
    health-check:
      { enable: true, url: "https://cp.cloudflare.com", interval: 300 }
    # override:
    #   additional-prefix: "[provider1]"
  # 订阅链接二
  # provider2:
  #   url: "" # 在""内填入链接
  #   type: http
  #   interval: 86400
  #   health-check:
  #     { enable: true, url: "https://cp.cloudflare.com", interval: 300 }
    # override:
    #   additional-prefix: "[provider2]"

  # 默认在分组内使用全部订阅：
  # include-all-providers: true
  # 如有特殊需求可以在分组内使用指定订阅：
  # use:
  #   - provider1
  #   - provider2

ipv6: true
allow-lan: true
mixed-port: 7890
unified-delay: true
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

geodata-mode: true
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

profile:
  store-selected: true
  store-fake-ip: true

dns:
  enable: true
  listen: :1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*"
    - +.lan
    - +.local
    - localhost.ptlogin2.qq.com
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - time.windows.com
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - 1.1.1.1
    - 8.8.8.8
  fallback:
    - tls://1.0.0.1
    - tls://8.8.4.4

sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
  skip-domain:
    - +.push.apple.com

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true

proxies: []

proxy-groups:
  - name: Proxy
    type: select
    # 如需删除分组需在下面的proxies也同步删除
    proxies:
      - Select
      - IEPL
      - Home
      - HongKong
      - TaiWan
      - Japan
      - Korea
      - Singapore
      - USA
      - EU
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
  - name: Select # 手动选择
    type: select
    include-all-providers: true
    icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
  - name: IEPL # 筛选IEPL节点
    type: select
    include-all-providers: true
    filter: (?i)IEPL
    icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/fallback.png
  - name: Home # 筛选家宽节点
    type: select
    include-all-providers: true
    filter: (?i)家宽
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Back.png
  - name: Final # 漏网之鱼策略组
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
  - name: AIGC
    type: select
    proxies:
      - USA
      - Proxy
    icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/openai.png
  - name: Apple
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Apple.png
  - name: CDN
    type: select
    proxies:
      - Download
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Speedtest.png
  - name: Download
    type: url-test
    include-all-providers: true
    filter: (?i)下载|低倍率
    tolerance: 50
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Download.png
  - name: Microsoft
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png
  - name: Streaming
    type: select
    proxies:
      - Proxy
      - HongKong
      - Singapore
      - USA
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
  - name: Telegram
    type: select
    proxies:
      - Proxy
      - Select
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
  - name: Domestic
    type: select
    proxies:
      - DIRECT
      - Proxy
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Domestic.png
  - name: Global
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png

  # 地区分组（普通中转节点）
  - name: HongKong
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)港|hk
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png
  - name: TaiWan
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)台|tw
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png
  - name: Japan
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)日|jp
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png
  - name: Korea
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)韩|kr
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png
  - name: Singapore
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)(新|狮|sg)
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png
  - name: USA
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)美|us
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png
  - name: EU
    type: url-test
    tolerance: 50
    include-all-providers: true
    filter: (?i)英|德
    exclude-filter: IEPL|家宽|低倍率|下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/European_Union.png

rule-providers:
  reject_non_ip_no_drop:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt
    path: ./sukkaw_ruleset/reject_non_ip_no_drop.txt
  reject_non_ip_drop:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt
    path: ./sukkaw_ruleset/reject_non_ip_drop.txt
  reject_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
    path: ./sukkaw_ruleset/reject_non_ip.txt
  reject_domainset:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/domainset/reject.txt
    path: ./sukkaw_ruleset/reject_domainset.txt
  reject_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/reject.txt
    path: ./sukkaw_ruleset/reject_ip.txt
  cdn_domainset:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./sukkaw_ruleset/cdn_domainset.txt
  cdn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./sukkaw_ruleset/cdn_non_ip.txt
  stream_us_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_us.txt
    path: ./sukkaw_ruleset/stream_us_non_ip.txt
  stream_us_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_us.txt
    path: ./sukkaw_ruleset/stream_us_ip.txt
  stream_eu_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_eu.txt
    path: ./sukkaw_ruleset/stream_eu_non_ip.txt
  stream_eu_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_eu.txt
    path: ./sukkaw_ruleset/stream_eu_ip.txt
  stream_jp_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_jp.txt
    path: ./sukkaw_ruleset/stream_jp_non_ip.txt
  stream_jp_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_jp.txt
    path: ./sukkaw_ruleset/stream_jp_ip.txt
  stream_kr_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_kr.txt
    path: ./sukkaw_ruleset/stream_kr_non_ip.txt
  stream_kr_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_kr.txt
    path: ./sukkaw_ruleset/stream_kr_ip.txt
  stream_hk_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_hk.txt
    path: ./sukkaw_ruleset/stream_hk_non_ip.txt
  stream_hk_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_hk.txt
    path: ./sukkaw_ruleset/stream_hk_ip.txt
  stream_tw_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream_tw.txt
    path: ./sukkaw_ruleset/stream_tw_non_ip.txt
  stream_tw_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream_tw.txt
    path: ./sukkaw_ruleset/stream_tw_ip.txt
  stream_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/stream.txt
    path: ./sukkaw_ruleset/stream_non_ip.txt
  stream_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/stream.txt
    path: ./sukkaw_ruleset/stream_ip.txt
  ai_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./sukkaw_ruleset/ai_non_ip.txt
  telegram_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./sukkaw_ruleset/telegram_non_ip.txt
  telegram_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./sukkaw_ruleset/telegram_ip.txt
  apple_cdn:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./sukkaw_ruleset/apple_cdn.txt
  apple_services:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./sukkaw_ruleset/apple_services.txt
  apple_cn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./sukkaw_ruleset/apple_cn_non_ip.txt
  microsoft_cdn_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./sukkaw_ruleset/microsoft_cdn_non_ip.txt
  microsoft_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./sukkaw_ruleset/microsoft_non_ip.txt
  download_domainset:
    type: http
    behavior: domain
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./sukkaw_ruleset/download_domainset.txt
  download_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./sukkaw_ruleset/download_non_ip.txt
  lan_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./sukkaw_ruleset/lan_non_ip.txt
  lan_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: ./sukkaw_ruleset/lan_ip.txt
  domestic_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: ./sukkaw_ruleset/domestic_non_ip.txt
  direct_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: ./sukkaw_ruleset/direct_non_ip.txt
  global_non_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./sukkaw_ruleset/global_non_ip.txt
  domestic_ip:
    type: http
    behavior: classical
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: ./sukkaw_ruleset/domestic_ip.txt
  china_ip:
    type: http
    behavior: ipcidr
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./sukkaw_ruleset/china_ip.txt
  china_ip_ipv6:
    type: http
    behavior: ipcidr
    format: text
    interval: 43200
    url: https://ruleset.skk.moe/Clash/ip/china_ip_ipv6.txt
    path: ./sukkaw_ruleset/china_ipv6.txt

rules:
  # Reject rules
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  # CDN rules
  - RULE-SET,cdn_domainset,CDN
  - RULE-SET,cdn_non_ip,CDN
  # Streaming services
  - DOMAIN-SUFFIX,misakaf.org,Streaming
  - RULE-SET,stream_us_non_ip,USA
  - RULE-SET,stream_eu_non_ip,EU
  - RULE-SET,stream_jp_non_ip,Japan
  - RULE-SET,stream_kr_non_ip,Korea
  - RULE-SET,stream_hk_non_ip,HongKong
  - RULE-SET,stream_tw_non_ip,TaiWan
  - RULE-SET,stream_non_ip,Streaming
  # AI services
  - RULE-SET,ai_non_ip,AIGC
  # Telegram
  - RULE-SET,telegram_non_ip,Telegram
  # Apple services
  - RULE-SET,apple_cdn,CDN
  - RULE-SET,apple_services,Apple
  - RULE-SET,apple_cn_non_ip,Domestic
  # Microsoft services
  - RULE-SET,microsoft_cdn_non_ip,CDN
  - RULE-SET,microsoft_non_ip,Microsoft
  # Download
  - RULE-SET,download_domainset,CDN
  - RULE-SET,download_non_ip,CDN
  # LAN
  - RULE-SET,lan_non_ip,DIRECT
  # Misc rules
  - RULE-SET,domestic_non_ip,Domestic
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,global_non_ip,Global
  # IP rules
  - RULE-SET,reject_ip,REJECT
  - RULE-SET,stream_us_ip,USA
  - RULE-SET,stream_eu_ip,EU
  - RULE-SET,stream_jp_ip,Japan
  - RULE-SET,stream_kr_ip,Korea
  - RULE-SET,stream_hk_ip,HongKong
  - RULE-SET,stream_tw_ip,TaiWan
  - RULE-SET,stream_ip,Streaming
  - RULE-SET,telegram_ip,Telegram
  - RULE-SET,lan_ip,DIRECT
  - RULE-SET,domestic_ip,Domestic
  - RULE-SET,china_ip,Domestic
  # 仅在使用IPv6时启用
  # - RULE-SET,china_ip_ipv6,Domestic
  # Final rules
  - GEOIP,CN,Domestic
  - MATCH,Final
