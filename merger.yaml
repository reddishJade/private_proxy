proxy-providers:
  iKuuu:
    url: "https://zvz7w.no-mad-world.club/link/1zX6YSNQZAs01cnf?clash=3&extend=1"
    type: http
    filter: (?i)港|日|下载|IEPL
    exclude-filter: 免费
    interval: 86400
    health-check:
      { enable: true, url: "https://cp.cloudflare.com", interval: 300 }

ipv6: true
allow-lan: true
mixed-port: 7890
unified-delay: true
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

geodata-mode: true
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

profile:
  store-selected: true
  store-fake-ip: true

dns:
  enable: true
  listen: :1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - rule-set:fakeip_filter
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - dot.pub
    - dns.alidns.com
  fallback:
    - dns.google
    - one.one.one.one

sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
  skip-domain:
    - +.push.apple.com

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true

proxies: []

proxy-groups:
  - name: Proxy
    type: select
    proxies:
      - Select
      - HongKong
      - Japan
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
  - name: Select
    type: select
    include-all-providers: true
    filter: IEPL
    icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
  - name: Final
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
  - name: AIGC
    type: select
    proxies:
      - Proxy
      - Japan
    icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/openai.png
  - name: Apple
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Apple.png
  - name: CDN
    type: select
    proxies:
      - Download
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Speedtest.png
  - name: Download
    type: url-test
    include-all-providers: true
    filter: (?i)下载|低倍率
    tolerance: 50
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Download.png
  - name: Microsoft
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png
  - name: Streaming
    type: select
    proxies:
      - Proxy
      - HongKong
      - Japan
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
  - name: Telegram
    type: select
    proxies:
      - Proxy
      - Select
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
  - name: Domestic
    type: select
    proxies:
      - DIRECT
      - Proxy
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Domestic.png
  - name: Global
    type: select
    proxies:
      - Proxy
      - DIRECT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png

  # 地区分组
  - name: HongKong
    type: select
    tolerance: 50
    include-all-providers: true
    filter: (?i)港|hk
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png
  - name: Japan
    type: select
    tolerance: 50
    include-all-providers: true
    filter: (?i)日|jp
    exclude-filter: 下载
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png

rule-providers:
  ai:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/ai.yaml
    path: ./rules/ai.yaml
  apple@cn:
    type: http
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/apple@cn.yaml
    path: ./rules/apple@cn.yaml
   direct:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/direct.yaml
    path: ./rules/direct.yaml
  domestic:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/domestic.yaml
    path: ./rules/domestic.yaml
  domestic@ip:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/domestic@ip.yaml
    path: ./rules/domestic@ip.yaml
  download:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/download.yaml
    path: ./rules/download.yaml
  fakeip_filter:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/fakeip_filter.yaml
    path: ./rules/fakeip_filter.yaml
  game@cn:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/game@cn.yaml
    path: ./rules/game@cn.yaml
  microsoft@cn:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/microsoft@cn.yaml
    path: ./rules/microsoft@cn.yaml
  private:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/private.yaml
    path: ./rules/private.yaml
  private@ip:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/private@ip.yaml
    path: ./rules/private@ip.yaml
  proxy:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/proxy.yaml
    path: ./rules/proxy.yaml
  proxy@ip:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/proxy@ip.yaml
    path: ./rules/proxy@ip.yaml
  reject:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/reject.yaml
    path: ./rules/reject.yaml
  reject@ip:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.gitmirror.com/reddishJade/private_proxy/refs/heads/main/output/reject@ip.yaml
    path: ./rules/reject@ip.yaml
    

rules:
  - RULE-SET,private,Private
  - RULE-SET,download,CDN
  - RULE-SET,direct,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,apple@cn,Apple
  - RULE-SET,microsoft@cn,Microsoft
  - RULE-SET,ai,AIGC
  - RULE-SET,game@cn,Game
  - RULE-SET,proxy,Global
  - RULE-SET,domestic,Domestic
  - RULE-SET,reject@ip,REJECT
  - RULE-SET,proxy@ip,Proxy
  - RULE-SET,private@ip,Private
  - RULE-SET,domestic@ip,Domestic
  - MATCH,Final